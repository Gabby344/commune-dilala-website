<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mairie - Commune de Dilala, Kolwezi | Service Public et Information Citoyenne</title>
    <meta name="description" content="Site officiel d'information de la Commune de Dilala, Kolwezi. Retrouvez les services municipaux, les actualit√©s et les d√©marches administratives.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-..." crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js" type="module"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js" type="module"></script>
    
    <style>
        /* === STYLE EXTERNALIS√â (BONNE PRATIQUE) - Int√©gr√© ici pour la d√©mo === */
        :root {
            --primary: #1e5a8c; /* Bleu municipal */
            --primary-dark: #0e3a5c;
            --secondary: #e6b020; /* Or, couleur des ressources mini√®res */
            --light: #f8f9fa;
            --dark: #2c3e50;
            --success: #27ae60;
            --danger: #e74c3c;
            --gray: #7f8c8d;
            --gray-light: #ecf0f1;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --radius: 8px;
            --transition: all 0.3s ease;
        }
        
        /* Base Reset */
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Open Sans', sans-serif;
            color: var(--dark);
            background-color: #f5f7fa;
            line-height: 1.6;
            overflow-x: hidden;
            text-rendering: optimizeLegibility; /* Am√©lioration de la lisibilit√© */
        }
        h1, h2, h3, h4 { font-family: 'Roboto', sans-serif; font-weight: 600; margin-bottom: 1rem; color: var(--primary-dark); }
        p { margin-bottom: 1rem; }
        a { text-decoration: none; color: inherit; }
        ul { list-style: none; }
        .highlight { color: var(--secondary); }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 2rem; } /* Conteneur r√©utilisable */

        /* Navigation */
        .header { 
            background-color: white; 
            box-shadow: var(--shadow); 
            position: sticky; 
            top: 0; 
            z-index: 1000; 
        }
        .navbar {
            padding: 1rem 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            display: flex;
            align-items: center;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            text-transform: uppercase;
        }
        .logo i { margin-right: 10px; font-size: 2rem; }
        .nav-menu { display: flex; gap: 2rem; }
        .nav-link {
            padding: 0.5rem 1rem;
            border-radius: var(--radius);
            font-weight: 500;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap; /* Emp√™che le saut de ligne sur les petits √©crans */
        }
        .nav-link:hover, .nav-link.is-active { background-color: var(--primary); color: white; }
        .menu-toggle { display: none; background: none; border: none; font-size: 1.5rem; color: var(--primary); cursor: pointer; }

        /* Main Content & Pages (Remplacement de page-content/page-section par une approche plus s√©mantique) */
        .main-content { padding: 2rem 0; }
        .page-section { padding: 2rem 0; display: none; animation: fadeIn 0.5s ease; }
        .page-section.is-active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .section-title {
            font-size: 2.2rem;
            margin-bottom: 2rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--secondary);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* Hero / Homepage */
        .hero {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 4rem 3rem;
            border-radius: var(--radius);
            margin-bottom: 3rem;
            text-align: center;
        }
        /* ... (Reste du CSS similaire, en utilisant is-active, et en standardisant les noms de classes) ... */

        /* Contact Section - Am√©lioration des Info Items */
        .contact-info .info-item {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            align-items: flex-start;
        }
        .contact-info .info-item i {
            font-size: 1.5rem;
            color: var(--primary);
            margin-top: 5px;
        }
        .contact-info .info-item strong {
            display: block;
            font-size: 1.1rem;
            margin-bottom: 0.3rem;
            color: var(--primary-dark);
        }
        
        /* Footer - Ajout de styles pour les liens */
        .footer-section a {
            color: rgba(255, 255, 255, 0.8);
            transition: var(--transition);
        }
        .footer-section a:hover {
            color: var(--secondary);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container { padding: 0 1rem; }
            .nav-menu {
                /* ... (Logique mobile menu) ... */
            }
            /* ... (Reste du CSS responsive) ... */
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="navbar container">
            <a href="#accueil" class="logo" aria-label="Accueil Mairie de Dilala">
                <i class="fas fa-landmark" aria-hidden="true"></i>
                <span>Dilala</span>
            </a>
            <button class="menu-toggle" id="menuToggle" aria-expanded="false" aria-controls="navMenu">
                <i class="fas fa-bars"></i>
            </button>
            <nav id="navMenu" class="nav-menu" aria-label="Menu principal">
                <ul role="list">
                    <li><a href="#accueil" class="nav-link is-active" data-page="accueil"><i class="fas fa-home" aria-hidden="true"></i> Accueil</a></li>
                    <li><a href="#commune" class="nav-link" data-page="commune"><i class="fas fa-university" aria-hidden="true"></i> La Commune</a></li>
                    <li><a href="#services" class="nav-link" data-page="services"><i class="fas fa-concierge-bell" aria-hidden="true"></i> Services</a></li>
                    <li><a href="#actualites" class="nav-link" data-page="actualites"><i class="far fa-newspaper" aria-hidden="true"></i> Actualit√©s</a></li>
                    <li><a href="#contact" class="nav-link" data-page="contact"><i class="fas fa-envelope" aria-hidden="true"></i> Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="main-content">
        <section id="accueil" class="page-section is-active container" role="region" aria-labelledby="accueil-title">
            <div class="hero">
                <div class="hero-content">
                    <h1 id="accueil-title">Commune de <span class="highlight">Dilala</span></h1>
                    <p class="subtitle">Ville de Kolwezi - Province du Lualaba<br>R√©publique D√©mocratique du Congo</p>
                    <p class="hero-text">Porte d'entr√©e administrative et c≈ìur historique de la capitale mondiale du cobalt. Un service public proche des citoyens.</p>
                    <a href="#contact" class="btn-hero" data-page="contact">Contacter la Mairie</a>
                </div>
                <div class="hero-stats" role="contentinfo">
                    <div class="stat-card">
                        <i class="fas fa-users" aria-hidden="true"></i>
                        <h3>Population</h3>
                        <p>‚âà 250 000 Habitants</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-map-marked-alt" aria-hidden="true"></i>
                        <h3>Superficie</h3>
                        <p>Environ 85 km¬≤</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-city" aria-hidden="true"></i>
                        <h3>Quartiers</h3>
                        <p>Luilu, Mobange, etc.</p>
                    </div>
                </div>
            </div>
            
            <div class="quick-info">
                <h2><i class="fas fa-info-circle" aria-hidden="true"></i> √Ä la une</h2>
                <div class="info-grid">
                    <article class="info-card alert">
                        <h3><i class="fas fa-hard-hat" aria-hidden="true"></i> S√©curit√© Renforc√©e</h3>
                        <p>Le nouveau commissariat de police de Luilu est pleinement op√©rationnel pour la s√©curit√© de tous les habitants.</p>
                    </article>
                    <article class="info-card">
                        <h3><i class="fas fa-tint" aria-hidden="true"></i> Projet Eau Potable</h3>
                        <p>Travaux en cours pour √©tendre le r√©seau d'adduction d'eau dans les quartiers p√©riph√©riques.</p>
                    </article>
                    <article class="info-card">
                        <h3><i class="fas fa-hand-holding-usd" aria-hidden="true"></i> Taxes Locales 2025</h3>
                        <p>La campagne de recouvrement des taxes et imp√¥ts locaux pour l'ann√©e 2025 est ouverte.</p>
                    </article>
                </div>
            </div>
        </section>

        <section id="commune" class="page-section container" role="region" aria-labelledby="commune-title">
            <h2 id="commune-title" class="section-title"><i class="fas fa-university" aria-hidden="true"></i> La Commune de Dilala</h2>
            <div class="about-container">
                <div class="about-text">
                    <p><strong>Dilala</strong> est l'une des deux communes urbaines fondatrices de la <strong>ville de Kolwezi</strong>, cr√©√©e en 1937-1938 pour h√©berger le si√®ge administratif des mines de l'Union Mini√®re du Haut-Katanga (UMHK).</p>
                    <h3><i class="fas fa-map-marked-alt" aria-hidden="true"></i> G√©ographie & Climat</h3>
                    <p>Situ√©e sur les <strong>hauts plateaux du Katanga</strong> √† environ 1 448 m d'altitude. Climat tropical de savane (Aw) avec une saison s√®che marqu√©e (mai √† septembre) et une saison des pluies (octobre √† avril).</p>
                    <h3><i class="fas fa-industry" aria-hidden="true"></i> √âconomie & Patrimoine</h3>
                    <p>√âconomie domin√©e par les activit√©s de soutien √† l'<strong>industrie mini√®re</strong> (cuivre, cobalt). La commune abrite des administrations, la gare centrale, et un tissu commercial dense. Son patrimoine urbain refl√®te son histoire planifi√©e d√®s l'√©poque coloniale.</p>
                </div>
                <aside class="about-image">
                    <div style="background: #ddd; height:300px; border-radius: var(--radius); display:flex; flex-direction: column; align-items:center; justify-content:center; color: var(--gray);" role="img" aria-label="Emplacement de l'H√¥tel de Ville de Kolwezi">
                        <i class="fas fa-mountain-city" style="font-size: 3rem;" aria-hidden="true"></i>
                        <p>Image : Centre-ville de Kolwezi</p>
                    </div>
                    <div class="image-caption">
                        <p><strong>Maire de la Ville de Kolwezi :</strong> Jacques Mumba Mputu</p>
                        <p><strong>Administrateur de la Commune :</strong> Information √† confirmer</p>
                        <p><strong>Superficie (Kolwezi) :</strong> ~ 213 km¬≤</p>
                    </div>
                </aside>
            </div>
        </section>

        <section id="services" class="page-section container" role="region" aria-labelledby="services-title">
            <h2 id="services-title" class="section-title"><i class="fas fa-concierge-bell" aria-hidden="true"></i> Services Municipaux</h2>
            <div class="services-grid">
                <article class="service-card" aria-labelledby="service-admin-title">
                    <div class="service-icon"><i class="fas fa-file-contract" aria-hidden="true"></i></div>
                    <h3 id="service-admin-title">Administration & √âtat Civil</h3>
                    <ul role="list">
                        <li>Actes de naissance, mariage, d√©c√®s</li>
                        <li>Cartes d'identit√© et pi√®ces d'√©tat civil</li>
                        <li>Certificats de r√©sidence et de domicile</li>
                        <li>L√©galisation de documents</li>
                    </ul>
                </article>
                <article class="service-card" aria-labelledby="service-urban-title">
                    <div class="service-icon"><i class="fas fa-home" aria-hidden="true"></i></div>
                    <h3 id="service-urban-title">Urbanisme & Voirie</h3>
                    <ul role="list">
                        <li>D√©livrance des permis de construire</li>
                        <li>Plans d'occupation des sols</li>
                        <li>Entretien de la voirie et des espaces publics</li>
                        <li>R√®glementation des constructions</li>
                    </ul>
                </article>
                <article class="service-card" aria-labelledby="service-secu-title">
                    <div class="service-icon"><i class="fas fa-shield-alt" aria-hidden="true"></i></div>
                    <h3 id="service-secu-title">S√©curit√© & Salubrit√©</h3>
                    <ul role="list">
                        <li>Coordination avec la Police Nationale (PNC)</li>
                        <li>Collecte des ordures m√©nag√®res</li>
                        <li>Campagnes de salubrit√© publique</li>
                        <li>Gestion des march√©s publics</li>
                    </ul>
                </article>
                <article class="service-card" aria-labelledby="service-social-title">
                    <div class="service-icon"><i class="fas fa-hand-holding-heart" aria-hidden="true"></i></div>
                    <h3 id="service-social-title">Affaires Sociales</h3>
                    <ul role="list">
                        <li>Recensement et aide aux vuln√©rables</li>
                        <li>M√©diation sociale et familiale</li>
                        <li>Appui aux initiatives communautaires</li>
                        <li>Coordination des actions humanitaires</li>
                    </ul>
                </article>
            </div>
            <div class="practical-info" role="contentinfo">
                <h3><i class="far fa-clock" aria-hidden="true"></i> Informations Pratiques</h3>
                <div class="info-box">
                    <p><strong>üìç Adresse pr√©sum√©e :</strong> Avenue de l'UMHK (ou avenue principale), Quartier Dilala, Kolwezi.</p>
                    <p><strong>üìÖ Jours et heures d'ouverture :</strong> Lundi √† Vendredi, de 7h30 √† 15h30.</p>
                    <p><strong>üöÇ Transport :</strong> La Gare Centrale de Kolwezi (SNCC) est situ√©e dans la commune de Dilala.</p>
                    <p><strong>‚ö†Ô∏è Note :</strong> Pour des informations officielles pr√©cises (adresse exacte, contacts t√©l√©phoniques), veuillez vous rapprocher directement des services de la Mairie de Kolwezi.</p>
                </div>
            </div>
        </section>

        <section id="actualites" class="page-section container" role="region" aria-labelledby="news-title">
            <h2 id="news-title" class="section-title"><i class="far fa-newspaper" aria-hidden="true"></i> Actualit√©s & Agenda</h2>
            <div class="about-container">
                <div class="about-text">
                    <article class="info-card featured">
                        <div class="news-date">D√©cembre 2025</div>
                        <h3>Budget Participatif 2026</h3>
                        <p>La commune invite les habitants √† des r√©unions de quartier pour discuter des priorit√©s d'investissement pour l'ann√©e prochaine (voirie, √©clairage, march√©s).</p>
                    </article>
                    <article class="info-card" style="margin-top: 1.5rem;">
                        <div class="news-date">Novembre 2025</div>
                        <h3>Lutte contre l'insalubrit√©</h3>
                        <p>Lancement d'une grande campagne "Dilala Propre" avec la distribution de poubelles et la sensibilisation dans les √©coles et les march√©s.</p>
                    </article>
                </div>
                <aside class="about-image">
                    <div class="info-box" role="contentinfo">
                        <h3><i class="fas fa-calendar-day" aria-hidden="true"></i> Prochains √âv√©nements</h3>
                        <ul class="event-list" role="list">
                            <li class="event-item">
                                <span class="event-date">15 D√©c</span>
                                <span class="event-desc">R√©union du Conseil Communal</span>
                            </li>
                            <li class="event-item">
                                <span class="event-date">20 D√©c</span>
                                <span class="event-desc">Marche sportive communautaire de No√´l</span>
                            </li>
                            <li class="event-item">
                                <span class="event-date">10 Janv</span>
                                <span class="event-desc">Lancement des inscriptions scolaires</span>
                            </li>
                        </ul>
                    </div>
                </aside>
            </div>
        </section>

        <section id="contact" class="page-section container" role="region" aria-labelledby="contact-title">
            <h2 id="contact-title" class="section-title"><i class="fas fa-envelope" aria-hidden="true"></i> Contactez la Mairie</h2>
            <div class="contact-container">
                <div class="contact-form">
                    <p class="form-intro">Utilisez ce formulaire pour vos demandes administratives, signalements ou requ√™tes. Votre message sera enregistr√© et trait√© par les services concern√©s.</p>
                    <form id="contactForm" aria-live="polite"> <div class="form-group">
                            <label for="name"><i class="far fa-user" aria-hidden="true"></i> Nom & Pr√©nom *</label>
                            <input type="text" id="name" name="name" required aria-required="true">
                        </div>
                        <div class="form-group">
                            <label for="email"><i class="far fa-envelope" aria-hidden="true"></i> Adresse Email *</label>
                            <input type="email" id="email" name="email" required aria-required="true">
                        </div>
                        <div class="form-group">
                            <label for="phone"><i class="fas fa-phone-alt" aria-hidden="true"></i> T√©l√©phone</label>
                            <input type="tel" id="phone" name="phone">
                        </div>
                        <div class="form-group">
                            <label for="subject"><i class="far fa-edit" aria-hidden="true"></i> Objet de la demande *</label>
                            <select id="subject" name="subject" required aria-required="true">
                                <option value="">-- Choisir --</option>
                                <option value="etat-civil">√âtat Civil</option>
                                <option value="urbanisme">Urbanisme & Permis</option>
                                <option value="proprete">Propret√© & Voirie</option>
                                <option value="taxes">Taxes & Imp√¥ts locaux</option>
                                <option value="social">Services Sociaux</option>
                                <option value="autre">Autre</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="message"><i class="far fa-comment-dots" aria-hidden="true"></i> Votre Message *</label>
                            <textarea id="message" name="message" rows="5" required aria-required="true" placeholder="D√©taillez votre demande ici..."></textarea>
                        </div>
                        <button type="submit" class="btn-submit" id="submitBtn">
                            <i class="fas fa-paper-plane" aria-hidden="true"></i> Envoyer le message
                        </button>
                        <div id="formMessage" class="form-message" role="alert"></div>
                    </form>
                </div>
                <div class="contact-info">
                    <h3><i class="fas fa-map-marker-alt" aria-hidden="true"></i> Coordonn√©es</h3>
                    <div class="info-item">
                        <i class="fas fa-university" aria-hidden="true"></i>
                        <div>
                            <strong>H√¥tel de Ville de Dilala</strong>
                            <p>Commune de Dilala<br>Ville de Kolwezi, Lualaba<br>R√©publique D√©mocratique du Congo</p>
                        </div>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-phone-alt" aria-hidden="true"></i>
                        <div>
                            <strong>T√©l√©phone (√† confirmer)</strong>
                            <p>+243 (0) XXX XX XX XX</p>
                        </div>
                    </div>
                    <div class="info-item">
                        <i class="far fa-clock" aria-hidden="true"></i>
                        <div>
                            <strong>Horaires d'ouverture</strong>
                            <p>Lundi - Vendredi : 7h30 - 15h30</p>
                            <p>Samedi : 8h00 - 12h00 (services limit√©s)</p>
                        </div>
                    </div>
                    <div class="map-placeholder">
                        <p><i class="fas fa-info-circle" aria-hidden="true"></i> <strong>Pour des contacts pr√©cis :</strong></p>
                        <p class="small">Il est recommand√© de vous rendre directement √† l'H√¥tel de Ville de Kolwezi ou de consulter les informations officielles publi√©es par la province du Lualaba pour obtenir les coordonn√©es exactes et √† jour de l'administration communale.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer" role="contentinfo">
        <div class="footer-content container">
            <div class="footer-section">
                <h4>Commune de Dilala</h4>
                <p>Service Public au c≈ìur de Kolwezi.</p>
                <p>Ce site est une vitrine d'information. Les donn√©es sont fournies √† titre indicatif.</p>
            </div>
            <nav class="footer-section" aria-labelledby="quick-links-title">
                <h4 id="quick-links-title">Liens Rapides</h4>
                <ul role="list">
                    <li><a href="#accueil">Accueil</a></li>
                    <li><a href="#services">Services</a></li>
                    <li><a href="#actualites">Actualit√©s</a></li>
                </ul>
            </nav>
             <nav class="footer-section" aria-labelledby="site-links-title">
                <h4 id="site-links-title">Ville & Province</h4>
                <ul role="list">
                    <li><a href="#commune">√Ä propos de Dilala</a></li>
                    <li><a href="#contact">Nous contacter</a></li>
                </ul>
            </nav>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 - Site d'information de la Commune de Dilala, Kolwezi. D√©velopp√© avec passion.</p>
            <p class="footer-note">Informations bas√©es sur des donn√©es g√©ographiques et administratives documentaires. Pour les d√©marches officielles, reportez-vous √† l'administration.</p>
        </div>
    </footer>

    <script type="module">
        // Importation des fonctions sp√©cifiques de Firebase V9
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js';
        import { getFirestore, collection, addDoc } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js';

        // ====================
        // 1. FIREBASE CONFIGURATION & INITIALIZATION
        // ====================
        const firebaseConfig = {
            apiKey: "AIzaSyD3J0XRt50pJB77ooBC2f_MWYX0Kc2GXZY",
            authDomain: "projet-commune-dilala.firebaseapp.com",
            projectId: "projet-commune-dilala",
            storageBucket: "projet-commune-dilala.firebasestorage.app",
            messagingSenderId: "298637105374",
            appId: "1:298637105374:web:7c1af2177fd6a1586c4a4f"
        };

        // Utilisation de la syntaxe V9
        let db;
        try {
            const firebaseApp = initializeApp(firebaseConfig);
            db = getFirestore(firebaseApp);
            console.log("‚úÖ Firestore est pr√™t pour les op√©rations d'√©criture.");
        } catch (error) {
            console.error("‚ùå Erreur d'initialisation Firebase. Le formulaire de contact ne fonctionnera pas :", error);
        }

        // ====================
        // 2. WEBSITE NAVIGATION & INTERACTIVITY
        // ====================
        const menuToggle = document.getElementById('menuToggle');
        const navMenu = document.getElementById('navMenu');
        const navLinks = document.querySelectorAll('.nav-link');
        const pageSections = document.querySelectorAll('.page-section');
        const contactForm = document.getElementById('contactForm');
        const submitBtn = document.getElementById('submitBtn');
        const formMessage = document.getElementById('formMessage');

        // Function to switch pages and update URL/Active State
        function switchPage(targetId) {
            navLinks.forEach(link => {
                link.classList.remove('is-active');
                if (link.getAttribute('data-page') === targetId) {
                    link.classList.add('is-active');
                }
            });
            pageSections.forEach(section => {
                section.classList.remove('is-active');
                if (section.id === targetId) {
                    section.classList.add('is-active');
                }
            });

            // Close mobile menu
            if (navMenu.classList.contains('active')) {
                navMenu.classList.remove('active');
                menuToggle.setAttribute('aria-expanded', 'false');
            }
            if (targetId !== 'accueil') {
                 window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // Event Listeners for Navigation
        document.addEventListener('DOMContentLoaded', function() {
            // Initial load
            const hash = window.location.hash.substring(1) || 'accueil';
            const validPages = ['accueil', 'commune', 'services', 'actualites', 'contact'];
            if (validPages.includes(hash)) {
                switchPage(hash);
            } else {
                switchPage('accueil');
            }

            // Navigation link clicks
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('data-page'); // Utilisation de data-page pour plus de clart√©
                    switchPage(targetId);
                    history.pushState(null, null, `#${targetId}`);
                });
            });

            // Mobile menu toggle
            menuToggle.addEventListener('click', () => {
                const isExpanded = navMenu.classList.toggle('active');
                menuToggle.setAttribute('aria-expanded', isExpanded);
            });

             // Simple click-away to close mobile menu
             document.addEventListener('click', (e) => {
                 if (!navMenu.contains(e.target) && !menuToggle.contains(e.target) && navMenu.classList.contains('active')) {
                     navMenu.classList.remove('active');
                     menuToggle.setAttribute('aria-expanded', 'false');
                 }
             });
        });

        // ====================
        // 3. CONTACT FORM SUBMISSION (FIREBASE V9)
        // ====================
        if (contactForm && db) {
            contactForm.addEventListener('submit', async function(e) {
                e.preventDefault();

                // 1. D√©sactiver le bouton & Afficher le message d'attente
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<i class="fas fa-sync fa-spin"></i> Envoi en cours...';
                formMessage.style.display = 'none';
                formMessage.className = 'form-message'; // Reset classes

                const formData = new FormData(contactForm);
                const data = Object.fromEntries(formData.entries());
                data.timestamp = new Date(); // Ajouter l'horodatage c√¥t√© client

                try {
                    // 2. √âcrire dans Firestore V9
                    const docRef = await addDoc(collection(db, "contactMessages"), data);

                    // 3. Succ√®s
                    formMessage.classList.add('success');
                    formMessage.innerHTML = `<i class="fas fa-check-circle"></i> Votre message a √©t√© envoy√© avec succ√®s (ID: ${docRef.id}) ! Nous vous r√©pondrons rapidement.`;
                    contactForm.reset();
                    console.log("Document √©crit avec ID: ", docRef.id);

                } catch (error) {
                    // 4. √âchec
                    console.error("Erreur lors de l'envoi du message √† Firestore: ", error);
                    formMessage.classList.add('error');
                    formMessage.innerHTML = `<i class="fas fa-times-circle"></i> Une erreur est survenue lors de l'envoi. Veuillez r√©essayer ou utiliser un autre moyen de contact.`;

                } finally {
                    // 5. R√©activer le bouton et afficher le message
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Envoyer le message';
                    formMessage.style.display = 'block';
                }
            });
        }
    </script>
</body>
</html>
